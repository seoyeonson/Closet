{% load static %}

<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Faster+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="{% static 'bs/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'bs/css/css.css' %}" rel="stylesheet">
    <script src="{% static 'bs/js/js.js' %}"></script>
    <script src="{% static 'bs/js/bootstrap.bundle.min.js' %}"></script>
    {% block extrahead %}{% endblock %}
    <title>
        {% block title %}
        {% endblock %}
    </title>
</head>
{% block script %}
{% endblock %}

<body>
    <header class="container-fluid">
        <nav>
            <!-- í™ˆíƒ‘ë©”ë‰´ë°” -->
            <a href="{% url 'main' %}" class="menu_left logo">CLOSET</a>
            <ul>
                <li class="menu_left"><a href="{% url 'main' %}">ìƒì˜</a></li>
                <li class="menu_left"><a href="{% url 'list' 1 %}">ë°”ì§€</a></li>
                <li class="menu_left"><a href="{% url 'list' 7 %}">ê°€ë°©</a></li>
                <li class="menu_left"><a href="{% url 'list' 10 %}">ì•…ì„¸ì„œë¦¬</a></li>
                <li class="menu_left"><a href="{% url 'list' 0 %}">ì‹ ë°œ</a></li>
                <li class="menu_right"><a href="{% url 'mypage' %}">ë§ˆì´í˜ì´ì§€</a></li>
                <li class="menu_right"><a href="{% url 'cart' %}">ì¥ë°”êµ¬ë‹ˆ</a></li>
            </ul>
        </nav>
    </header>
    <div id="wrap" class="container">
        <a>
            <div id="chatbot">
                <i class="far fa-comment-dots"></i>
            </div>
        </a>
        <div id="chatbot_chat">
            <div class="chat_header">
                <!-- <i id="chevron_left" class="material-icons chevron_left">chevron_left</i> -->
                <i id="close" class="material-icons close">close</i>
                <hr>
            </div>
            <div id="chatbox"
                style="height:84%;margin-top:57px;padding:10px;overflow-y:scroll;overflow-x:hidden;max-height:80vh;">
                <div class="chatbot_logo logo">CLOSET</div>
                <div class="chat_intro">
                    <h2>í´ë¡œì ¯ì— ë¬¸ì˜í•˜ê¸°</h2>
                    <span style="color: rgba(0, 0, 0, 0.4);">'ì·¨í–¥ì— ë§ëŠ” ì˜·'ì„ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤.</span><br>
                    <span style="font-size: 15px;"><i class="fas fa-bolt"
                            style="font-size: 10px; color: rgb(0, 94, 255); margin-bottom: 20px;"></i> ë³´í†µ ëª‡ ë¶„ ë‚´ ë¹ ë¥¸
                        ë‹µë³€</span>
                </div>
                <!-- <div id="divClock" class="clock"></div> -->
                <div>
                    <div class="bottext_div">
                        <span style="font-weight: bold;">ê³ ê°ë‹˜ ì•ˆë…•í•˜ì„¸ìš”?</span><br>
                        ë‚˜ì˜ ì·¨í–¥ìœ¼ë¡œ ì‡¼í•‘ì„ ì°¸ ì‰½ê²Œ,<br>
                        í´ë¡œì ¯ ì±—ë´‡ì…ë‹ˆë‹¤. ğŸ¤–<br><br>
                        ì›í•˜ì‹œëŠ” ë¬¸ì˜ë¥¼ ë§ì”€í•´ì£¼ì„¸ìš”!
                    </div>
                </div>
            </div>
            <div class="chabot_footer">
                <hr>
                <table width="100%">
                    <tr>
                        <td width="90%">
                            <input id="chattext">
                        </td>
                        <td width="10%">
                            <button id="sendbtn"><i class="material-icons send">send</i></button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        {% block contents %}
        {% endblock %}
    </div>
    <footer>
    </footer>
</body>

<script>
    $(function () {
        $(document).on("click", ".info_submit", function () {
            send_info();
        });
    });

    function send_info() {
        size_info = $("input[name=size]:checked").val()
        color_info = $("input[name=color]:checked").val()

        if(size_info){
            size_info = size_info.trim()
        }else{
            size_info = ''
        };
        if(color_info){
            color_info = color_info.trim()
        }else{
            color_info = ''
        }
        count_info = $(".p_cnt_input").val().trim()
        const jsonData_info = {
            query: '3ê°œ',
            info: {
                'size': size_info,
                'color': color_info,
                'product_count': count_info
            }
        }

        $.ajax({
            url: 'http://127.0.0.10:5000/query/TEST',
            type: "POST",
            data: JSON.stringify(jsonData_info),
            dataType: "JSON", // ì‘ë‹µë°›ì„ ë°ì´í„° íƒ€ì…
            contentType: "application/json; charset=utf-8",

            success: function (response) {
                alert(response.Answer);
            }

        });

    };
</script>

</html>